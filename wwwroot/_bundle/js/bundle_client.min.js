function togglePasswords(){var n=document.querySelectorAll(".password-input"),t=document.getElementById("showPassword");n.forEach(function(n){n.type=t.checked?"text":"password"})}function showLoading(){$("#loading-spinner").show()}function hideLoading(){$("#loading-spinner").hide()}function buttonCheckout(){var n=$("#checkoutForm").serialize();showLoading();$.ajax({url:"/Cart/Checkout",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:n,success:function(n){n.success?n.redirectUrl?Swal.fire("Đặt hàng thành công!","","success").then(t=>{t.isConfirmed&&(window.location.href=n.redirectUrl)}):n.stripeSessionUrl?Swal.fire("Xác nhận thông tin, Vui lòng thanh toán qua thẻ!","","success").then(t=>{t.isConfirmed&&(window.location.href=n.stripeSessionUrl)}):Swal.fire("Có lỗi xảy ra với URL chuyển hướng!","","error"):Swal.fire("Đặt hàng không thành công!","","error")},error:function(){Swal.fire("Có lỗi xảy ra khi đặt hàng!","","error")},complete:function(){hideLoading()}})}function buttonChangePassword(){var n=$("#ChangePasswordForm").serialize();showLoading();$.ajax({url:"/CustomerInfo/Changepassword",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:n,success:function(n){n.success?Swal.fire("Cập nhật mật khẩu thành công!","","success").then(()=>{location.href="/CustomerInfo/Changepassword"}):Swal.fire(n.message||"Cập nhật mật khẩu không thành công!","","error")},error:function(){Swal.fire("Có lỗi xảy ra khi cập nhật mật khẩu!","","error")},complete:function(){hideLoading()}})}function SubmitOrderCancel(){var r=document.getElementById("cancelOrderForm"),t=new FormData(r),n={},i;t.forEach((t,i)=>{i==="__RequestVerificationToken"?n.__RequestVerificationToken=t:n[i]=t});i=JSON.stringify(n);showLoading();$.ajax({url:"/CustomerOrder/CancelOrder",type:"POST",data:i,headers:{RequestVerificationToken:t.get("__RequestVerificationToken")},contentType:"application/json","async":!0,processData:!1,success:function(n){n.success?Swal.fire("Đơn hàng đã hủy thành công!","","success").then(()=>{$("#CanCelCustomerReason").modal("hide"),location.reload()}):Swal.fire("Đã xảy ra lỗi khi hủy đơn hàng!","","error")},error:function(){Swal.fire("Đã xảy ra lỗi. Vui lòng thử lại!","","error")},complete:function(){hideLoading()}})}function updateCartItemCount(){$.ajax({type:"GET",url:"/Cart/GetCartItemCount",success:function(n){$("#cartItemCount").text(n)},error:function(){console.log("Lỗi khi lấy số lượng sản phẩm trong giỏ hàng.")}})}function loadCategories(){$.ajax({type:"GET",url:"/Home/ListCategory",dataType:"json",success:function(n){var t=$("#categoryDropdown");t.empty();$.each(n,function(n,i){t.append(`<li><a class="dropdown-item" href="#" data-category-id="${i.id}">${i.tenLoai}</a></li>`)});t.on("click","a",function(n){n.preventDefault();var t=$(this).data("category-id");redirectToCategoryPage(t)})},error:function(){console.log("Lỗi khi tải danh mục sản phẩm.")}})}function redirectToCategoryPage(n){window.location.href=`/Category/Index/${n}`}function carouselNext(){var n=carousel.querySelector(".carousel-item.active"),t=n.nextElementSibling||carousel.querySelector(".carousel-item:first-child");n.classList.remove("active");t.classList.add("active")}function carouselPrev(){var n=carousel.querySelector(".carousel-item.active"),t=n.previousElementSibling||carousel.querySelector(".carousel-item:last-child");n.classList.remove("active");t.classList.add("active")}function startCarousel(){intervalId=setInterval(carouselNext,interval)}function stopCarousel(){clearInterval(intervalId)}function chatOpen(){$.ajax({type:"GET",url:"/CustomerInfo/AccountInfo",success:function(n){n&&(document.getElementById("chat-open").style.display="none",document.getElementById("chat-close").style.display="block",document.getElementById("chat-window1").style.display="block",audio1.load(),audio1.play())},error:function(){Swal.fire("Thông báo","Bạn cần phải đăng nhập ","warning").then(function(){window.location.href="/Login/account/Login"})}})}function chatClose(){document.getElementById("chat-open").style.display="block";document.getElementById("chat-close").style.display="none";document.getElementById("chat-window1").style.display="none";document.getElementById("chat-window2").style.display="none";audio1.load();audio1.play()}function openConversation(){document.getElementById("chat-window2").style.display="block";document.getElementById("chat-window1").style.display="none";audio1.load();audio1.play()}function userResponse(){console.log("response");let n=document.getElementById("textInput").value;if(n=="")alert("Please type something!");else{document.getElementById("messageBox").innerHTML+=`<div class="first-chat">
      <p>${n}</p>
      <div class="arrow"></div>
    </div>`;let i=new Audio("https://prodigits.co.uk/content/ringtones/tone/2020/alert/preview/4331e9c25345461.mp3");i.load();i.play();document.getElementById("textInput").value="";var t=document.getElementById("messageBox");t.scrollTop=t.scrollHeight;setTimeout(()=>{adminResponse()},1e3)}}function adminResponse(){fetch("https://api.adviceslip.com/advice").then(n=>n.json()).then(n=>{let r=n.slip;document.getElementById("messageBox").innerHTML+=`<div class="second-chat">
          <div class="circle" id="circle-mar"></div>
          <p>${r.advice}</p>
          <div class="arrow"></div>
        </div>`;let t=new Audio("https://downloadwap.com/content2/mp3-ringtones/tone/2020/alert/preview/56de9c2d5169679.mp3");t.load();t.play();var i=document.getElementById("messageBox");i.scrollTop=i.scrollHeight}).catch(n=>{console.log(n)})}function checkComentlogin(){$.ajax({type:"GET",url:"/User/AddComment",success:function(n){n&&(window.location.href="/User/AddComment")},error:function(){Swal.fire(getTranslation("Notification"),getTranslation("Youneedtologin"),"warning").then(function(){window.location.href="/Login/account/Login"})}})}function renderCity(n){for(const n of n)citis.options[citis.options.length]=new Option(n.Name,n.Id);citis.onchange=function(){if(district.length=1,ward.length=1,this.value!=""){const t=n.filter(n=>n.Id===this.value);for(const n of t[0].Districts)district.options[district.options.length]=new Option(n.Name,n.Id)}};district.onchange=function(){ward.length=1;const t=n.filter(n=>n.Id===citis.value);if(this.value!=""){const n=t[0].Districts.filter(n=>n.Id===this.value)[0].Wards;for(const n of n)wards.options[wards.options.length]=new Option(n.Name,n.Id)}}}var carousel,interval,intervalId;$(document).ready(function(){$(".updatecartitem").click(function(){var t=$(this).data("productid"),n=$("#quantity-"+t).val();if(n<1){Swal.fire("Cập nhật thất bại","Vui lòng nhập số lượng ít nhất là 1.","error");return}n<1&&(n=3);$.ajax({url:"/Cart/UpdateCartItemQuantity",method:"POST",data:{productId:t,quantity:n},success:function(){Swal.fire("Cập nhật thành công","","success").then(function(){location.reload()})},error:function(){Swal.fire("Lỗi","Không thể cập nhật sản phẩm.","error")}})})});$(".delete-item").on("click",function(n){n.preventDefault();var t=$(this).attr("href");Swal.fire({title:"Xác nhận xóa sản phẩm?",text:"Bạn có chắc muốn xóa sản phẩm này khỏi giỏ hàng?",icon:"warning",showCancelButton:!0,confirmButtonText:"Xóa",cancelButtonText:"Hủy"}).then(n=>{n.isConfirmed&&$.ajax({url:t,method:"POST",success:function(n){n.success?Swal.fire(getTranslation("Deletedsuccessfully"),"","success").then(function(){location.reload()}):Swal.fire("Lỗi",n.message,"error")},error:function(){Swal.fire("Lỗi","Không thể xóa sản phẩm.","error")}})})});$(document).on("click",".View-CanCelReason",function(){let n=$(this).data("id");$.ajax({url:"/CustomerOrder/CancelReason?id="+n,type:"GET",dataType:"html",success:function(t){$("#View_CanCelReason").find(".modal-content").html(t);$("#OrderId").val(n);$("#View_CanCelReason").modal("show")}})});updateCartItemCount();loadCategories();$(document).ready(function(){$(".addToCartButton").click(function(){var n=$(this).data("product-id");$.ajax({type:"POST",url:"/Cart/AddToCart",data:{id:n},success:function(){const n=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=Swal.stopTimer,n.onmouseleave=Swal.resumeTimer}});n.fire({icon:"success",title:getTranslation("AddToCartSuccess")}).then(function(){location.reload()})},error:function(){Swal.fire(getTranslation("Error"),getTranslation("Youneedtologin"),"warning").then(function(){window.location.href="/Login/account/Login"})}})})});$(document).ready(function(){$("#addTocartdetail").submit(function(n){n.preventDefault();var t=$(this).data("product-id"),i=$("#quantity").val();$.ajax({type:"POST",url:"/Cart/AddToCart",data:{id:t,quantity:i},success:function(){const n=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=Swal.stopTimer,n.onmouseleave=Swal.resumeTimer}});n.fire({icon:"success",title:getTranslation("AddToCartSuccess")}).then(function(){location.reload()})},error:function(){Swal.fire(getTranslation("Error"),getTranslation("Youneedtologin"),"warning").then(function(){window.location.href="/Login/account/Login"})}})})});$(document).ready(function(){$(".checkLoginAndNavigateToCart").click(function(){$.ajax({type:"GET",url:"/Cart/Index",success:function(n){n&&(window.location.href="/Cart/Index")},error:function(){Swal.fire(getTranslation("Notification"),getTranslation("Youneedtologin"),"warning").then(function(){window.location.href="/Login/account/Login"})}})})});$(document).ready(function(){$(".checkLoginAndNavigateToAccout").click(function(){$.ajax({type:"GET",url:"/CustomerInfo/AccountInfo",success:function(n){n&&(window.location.href="/CustomerInfo/AccountInfo")},error:function(){Swal.fire(getTranslation("Notification"),getTranslation("Youneedtologin"),"warning").then(function(){window.location.href="/Login/account/Login"})}})})});$(document).ready(function(){$(".checkLoginAndNavigateToBill").click(function(){$.ajax({type:"GET",url:"/CustomerOrder/Index",success:function(n){n&&(window.location.href="/CustomerOrder/Index")},error:function(){Swal.fire(getTranslation("Notification"),getTranslation("Youneedtologin"),"warning").then(function(){window.location.href="/Login/account/Login"})}})})});carousel=document.getElementById("carouselExampleCrossfade");interval=3e3;carousel.querySelector(".carousel-control-next").addEventListener("click",function(){stopCarousel();carouselNext();startCarousel()});carousel.querySelector(".carousel-control-prev").addEventListener("click",function(){stopCarousel();carouselPrev();startCarousel()});startCarousel();let audio1=new Audio("https://s3-us-west-2.amazonaws.com/s.cdpn.io/242518/clickUp.mp3");addEventListener("keypress",n=>{if(n.keyCode===13){const n=document.getElementById("textInput");n===document.activeElement&&userResponse()}});var citis=document.getElementById("city"),districts=document.getElementById("district"),wards=document.getElementById("ward"),Parameter={url:"https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json",method:"GET",responseType:"application/json"},promise=axios(Parameter);promise.then(function(n){renderCity(n.data)});